language: scala

sudo: required

dist: trusty

install:
  - ./.travis/install.sh

cache:
  directories:
    - "~/.sbt"
    - "~/.ivy2"
    - "project/target/resolution-cache"
    - "project/target/streams"
    - "api/target"
    - "calm_adapter/target"
    - "common/target"
    - "id_minter/target"
    - "ingestor/target"
    - "transformer/target"

matrix:
  include:
    - env: PROJECT=common
    - env: PROJECT=api
    - env: PROJECT=transformer
    - env: PROJECT=calm_adapter
    - env: PROJECT=ingestor
    - env: PROJECT=id_minter

script:
  - ./.travis/run.sh

env:
  global:
    # This secure environment variable contains an encrypted version of
    # the following environment variables:
    #  * AWS_ACCESS_KEY_ID
    #  * AWS_SECRET_ACCESS_KEY
    #  * AWS_ECR_REPO
    #  * CONFIG_BUCKET
    - secure: MHe9bZxr2Ww9yaRxlGN3yXRa1p+YZdIR0lZrqOr6qxL9GDk1R3lthEObThy/w8irMtE+Rha0PAa7oM2QmdQIm/W7DTiDT4YeVhxw+eCOkAyASqPWMPVV03GA3m0HNY2OCBioiga77HQikLvmLxra1tU292+R8fHaxmmhF7g7YvdRRgi4IPtSZQLmGHbpgN8lOJQNHkh9JYNOjzqYo1guNt4zMHWdltMfYzmt/t7gK5nduv+KzBRH8AV+bjn5a9lH/q/hx4Wk2MG6pxKVNP2aJ57S3Y2wC9OxLBQKWP6ZSRR8/g3KN/lDkpoY14u3TE2muLfYdZdL9/Vy9gOiuCVZNCvqj2C0sFbmYX0d/XVkoVTBgv8hDqdjwWHywtC0yjxnLYk4gridYpS8YPuaMXIrY9rLMgPHr62WZXoSALjlq56VjoNOpVCTrxFkJ1wW9/p2kkwrW8fGTqy/wnZlDelxdrkEJe4YfBB79FhLGJDIaBeXfiFC0lajVJX4D6TEwAuVlWcCTsUkZYIYvLHajjzdOJJYcoySbipSU75t3OJ9Qp6t1VEQS7AMa9moBQtM9ha3RNbBh8A+qksU3X+Y2uG0738HhF8h56LWX+1iH1FC0VXLh8UQWKDvtVfvZWnOJGuOfP7Gxvt3btMQvvBM0LoEOvb8a6kMsfR+oQ6uXEHLMBA=
